\input{header.tex}
\input{name.tex}
\input{title.tex}

\section{综述}

本次课程项目中，我们完成了Tiger编译器的前端部分，即从源代码输入到生成抽象语法树。测试表明，我们能够分析语法正确的Tiger程序，并生成抽象语法树以便后续处理。

我们选用了使用LALR(1)文法的flex和bison套件来作为我们的辅助工具，并且使用C++的面向对象设计方法组织数据结构。这使得我们的分析简单而高效。

我们完成了一部分的错误提示和错误修复。flex和bison的一些技巧性用法让我们能够在词法和语法分析的同时记录错误信息。我们能够直观地提示出现的错误。对于几种简单的错误，我们能够尝试分析并继续执行。

限于时间，我们没能来得及进一步从语义的层面上进行分析。然而清晰的抽象语法树表示可以让我们很方便地扩充这方面的功能。若能有更多时间，我们将会完成语义分析并尝试解释执行Tiger代码。

我们共完成了两个工具，分别完成以下功能：

\begin{enumerate}
\item 从用户输入读入设计，进行词法和句法的分析，建立抽象语法树，在理解语法的基础上将树形表示转换为代码重新输出。这个目标让我们在编码的过程中更轻松的调试。另外，这个工作也可以作为“Tiger智能编辑器”的一部分。即编辑器能够理解语义，给出用户编码过程中词法和语法方面的建议，提高工作效率。
\item 从用户输入读入设计，进行词法和句法的分析，建立抽象语法树，将树形表示用dot语言描述并输出。而后dot语言描述可以经过Graphviz工具转换为表达清晰的图形。这个目标是我们对设计要求的满足，即我们能直观的看出抽象语法树在内存中的表示。

\end{enumerate}

以上两套工具使用相同的后端数据结构，仅包含主函数的文件内容不同。这说明，我们的抽象语法树数据结构设计合理，能够满足不同条件下的需求。

我们提交的文件包括以上两个工具对所有51个测试用例运行的结果。经过观察，它们的结果均正确。

\section{实验准备}

\subsection{实验原理}

TLC5620是美国德州仪器（TI）公司生产的8位带有高阻抗缓冲输入的4通道D/A转换芯片。可产生单调的、1到2倍于基准电压和接地电压差值的输出。通常情况下TLC5620的供电电压为5V，器件内部集成上电复位功能。通用微处理器通过CLK、DATA、LOAD和LDAC四根控制线可实现对该芯片的控制。

\subsection{实验电原理图}

在我所用的Proteus软件中并没有直接提供TLC5620的器件模型。所以此处用TLC5628代替。TCL5628与TLC5620基本一致，然而它有8个DAC输出。对于原理图模型，仍能表达连接关系。由于基准由额外的电路产生，并与本次实验基本无关，所以图中略去。

\begin{center}
%\includegraphics[width=0.70\columnwidth]{sch}\\
实验电原理图
\end{center}

\subsection{程序流程图}

\begin{center}
%\includegraphics[width=0.4 \columnwidth]{dac_p3}  \\
根据IO属于决定DAC输出
\end{center}

\begin{center}
%\includegraphics[width=0.9 \columnwidth]{dac_wave_gen}  \\
发生方波和梯形波
\end{center}

\newpage

\subsection{程序源代码}

\asmscript{dac_p3}{根据IO属于决定DAC输出}

\asmscript{dac_wave_gen}{发生方波和梯形波}

\section{实验结果}

实验一结果如下表

\begin{center}
\includegraphics[width=0.5 \columnwidth]{result}  \\
DAC输出比较和误差分析
\end{center}

可以看到，在合适的范围内，输出误差在1\%上下。输出误差主要来自DAC的内部结构，这将会在模拟集成电路设计中更深入涉及，此处不再深入分析。

实验二结果如预期。

\section{实验思考}
一个更好的实践是用定时器产生DAC输出锁存信号，这样能够保持输出数据的间隔正确，发生的信号更加精确。这要求处理器产生信号的速度高于采样频率。事实上，TCL5620的设计就是为了这样而准备的。使能LDAC信号后才会有输出。这样，可以用定时器来控制LDAC信号的产生，根据需要可能要额外的反相器。鉴于本次实验对误差并非非常敏感，此处便不再深入。

\end{document}
